# Инфраструктура

## Сервер

Под сервером понимается кластер из нескольких VPS.

Чтобы управлять приложениями в кластере используется оркестратор [kubernetes](https://kubernetes.io/).

Приходящий запрос попадает на [Ingress](https://kubernetes.io/docs/concepts/services-networking/ingress/), который далее определяет узел для обработки запроса и перенаправляет его туда.

На основных узлах кластера kubernetes поднимаются приложения для обработки пользовательских запросов, изменению структуры базы данных, создания резернвых копий и так далее.

Так же отдельно выделены узлы для базы данных и кеша.

## Хранилища

Для сохранения данных используются:

- Временные или часто используемых данные будут храниться в **Redis**.

- Основные данные будут храниться в **PostgreSQL**.

- Резервные копии данных будут храниться на внешнем хранилище **Google Drive**.

- Полноценные файлы и изображения будут храниться на внешнем **S3-совместимом объектном хранилище**.

## Внешние интеграции

### Сетевые компоненты

Все, без исключения, пользователи будут взаимодействовать с продуктом через доменное имя (DNS, например bidaro.ua.com). Оно переводит пользователя по нашему IP адресу, где его принимает наш сервер.

### Безопасность сети

При создании соединения между пользователем и сервером, будет производится обмен SSL/TLS сертификатами от Let's Encrypt, которые будут шифровать передачу логинов, паролей и других важных данный.

### Платежные сервисы

Для приема платажей будет использоватся платежный сервис Fondy.

### Почтовый сервис

Для отправки рассылки будет использоваться почтовый провайдер Gmail.
